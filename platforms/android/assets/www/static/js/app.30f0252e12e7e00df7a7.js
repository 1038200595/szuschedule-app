webpackJsonp([2,0],{0:function(t,e,n){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}var i=n(23),a=s(i),o=n(92),u=s(o),r=n(40),l=s(r),c=n(99),f=s(c),d=n(98),h=s(d),_=n(93),p=s(_),m=n(94),v=s(m);a["default"].use(f["default"]),a["default"].use(h["default"]);var g=[{path:"/",component:p["default"],name:"index"},{path:"/login",component:v["default"],name:"login"}],w=new f["default"]({routes:g});new a["default"]({store:l["default"],router:w,render:function(t){return t(u["default"])}}).$mount("#app")},24:function(t,e){"use strict";t.exports={api:"http://172.29.43.108:3010/api"}},38:function(t,e){"use strict";t.exports={5:{time:"8:30 - 9:10",len:1,offset:0},10:{time:"8:30 - 10:00",len:2,offset:0},11:{time:"8:30 - 11:00",len:3,offset:0},13:{time:"9:20 - 10:00",len:2,offset:1},15:{time:"9:20 - 11:50",len:3,offset:1},17:{time:"10:20 - 11:00",len:1,offset:2},20:{time:"10:20 - 11:50",len:2,offset:2},21:{time:"10:20 - 14:40",len:4,offset:2},23:{time:"11:10 - 11:50",len:1,offset:3},25:{time:"11:10 - 15:30",len:4,offset:3},27:{time:"14:00 - 14:40",len:1,offset:4},30:{time:"14:00 - 15:30",len:2,offset:4},31:{time:"14:00 - 16:30",len:3,offset:4},33:{time:"14:50 - 15:30",len:1,offset:5},35:{time:"14:50 - 17:20",len:3,offset:5},37:{time:"15:50 - 16:30",len:1,offset:6},40:{time:"15:50 - 17:20",len:2,offset:6},41:{time:"15:50 - 19:40",len:4,offset:6},43:{time:"16:40 - 17:20",len:1,offset:7},44:{time:"16:40 - 19:50",len:4,offset:7},45:{time:"17:30 - 19:00",len:1,offset:12},47:{time:"19:00 - 20:20",len:2,offset:8},50:{time:"19:00 - 20:20",len:2,offset:8},53:{time:"19:00 - 21:10",len:3,offset:8},55:{time:"19:40 - 20:20",len:1,offset:9},56:{time:"19:40 - 21:45",len:3,offset:9},57:{time:"20:30 - 21:10",len:1,offset:10},60:{time:"20:30 - 21:45",len:2,offset:10},65:{time:"21:10 - 21:45",len:1,offset:11},70:{time:"自选时间",len:null,offset:null}}},39:function(t,e,n){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}var i=n(25),a=s(i),o=n(24),u=s(o),r=n(23),l=s(r);t.exports={updateSchedule:function(t,e){var n=t.commit;return new a["default"](function(t,s){l["default"].http.post(u["default"].api+"/schedule",{ticket:e}).then(function(e){200===e.data.status?(n("SCHEDULE",e.data.data.schedule),t()):s()},function(t){console.log(t),s()})})},updatePreLoginState:function(t,e){var n=t.commit;n("PRELOGIN",e)}}},40:function(t,e,n){"use strict";function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}var a=n(23),o=i(a),u=n(100),r=i(u),l=n(42),c=i(l),f=n(41),d=s(f),h=n(39),_=i(h);o["default"].use(r["default"]),t.exports=new r["default"].Store({state:c["default"],mutations:d,actions:_["default"]})},41:function(t,e,n){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){o(t,e)}function a(t,e){u(t,e)}function o(t,e){window.localStorage.setItem("schedule",(0,l["default"])(e)),t.schedule=e}function u(t,e){t.isPreLogin=e.isPreLogin,t.preLoginState=e.preLoginState,t.schedule=e.schedule}Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),l=s(r);e.SCHEDULE=i,e.PRELOGIN=a},42:function(t,e){"use strict";var n={isPreLogin:!1,isLogin:!1,preLoginState:{stu_no:0,stu_name:""},loginState:{id:0,stu_no:0,stu_name:"",create_time:0,last_login_time:0,login_ticket:""},schedule:{}},s=window.localStorage;s.getItem("isPreLogin")&&(n.isPreLogin=!0,n.preLoginState=JSON.parse(s.getItem("preLoginState"))),s.getItem("isLogin")&&(n.isLogin=!0,n.loginState=JSON.parse(s.getItem("loginState"))),s.getItem("schedule")&&(n.schedule=JSON.parse(s.getItem("schedule"))),t.exports=n},43:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={}},44:function(t,e,n){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(13),a=s(i),o=n(48),u=s(o),r=n(46),l=s(r),c=n(47),f=s(c),d=n(38),h=s(d);e["default"]={data:function(){return{menuOpen:!1}},mounted:function(){var t=this;return(0,f["default"])(u["default"].mark(function e(){return u["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$store.state.isLogin||t.$store.state.isPreLogin){e.next=3;break}return t.$router.push("login"),e.abrupt("return");case 3:if(0!==(0,l["default"])(t.$store.state.schedule).length){e.next=15;break}return e.prev=4,e.next=7,t.$store.dispatch("updateSchedule",t.$store.state.loginState.login_ticket);case 7:t.renderSchedule(),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](4),console.log(1);case 13:e.next=16;break;case 15:t.renderSchedule();case 16:case"end":return e.stop()}},e,t,[[4,10]])}))()},methods:{callWechatLogin:function(){var t="snsapi_userinfo",e="_"+ +new Date;window.Wechat.auth(t,e,function(t){navigator.notification.beep((0,a["default"])(t))},function(t){navigator.notification.beep("拉起微信登陆失败："+t)})},renderSchedule:function(){var t=this,e=this.$store.state.schedule;(0,l["default"])(e).forEach(function(n){var s=document.getElementById("day"+n),i=e[n];0===i.length?s.innerHTML=s.innerHTML+t.spaceDom(12):!function(){var e=0,n=i.map(function(n,s){var i=t.typeToTime(n.section_order);if(n.odd_even_week%2!==t.getWeek()&&3!==n.odd_even_week)return"";var a=t.spaceDom(i.offset-e)+t.classDom(n.section_order,n.course_name,n.class_location);return e+=i.offset-e+i.len,a});n=n.join(""),12!==e&&(n+=t.spaceDom(12-e)),s.innerHTML=s.innerHTML+n}()})},typeToTime:function(t){return h["default"][t]},spaceDom:function(t){for(var e="",n=0;n<t;n++)e+='<div class="class normal empty"><p>　</p></div>';return e},classDom:function(t,e,n){return'<div class="class normal type'+t+'"><p>'+e+"<br/>@"+n+"</p></div>"},getWeek:function(){var t=new Date,e=new Date(t.getFullYear(),0,1),n=Math.floor((t-e)/864e5)+1;return(Math.floor(n/7)-35)%2},showMenu:function(){this.menuOpen=!this.menuOpen},showAbout:function(){this.menuOpen=!this.menuOpen,navigator.notification.alert("深大课表是由“这很深大”公众号团队开发的一款课表查询软件，仅供深大学生使用。\n版本号: v0.1.0 preview\n作者: Jason <jason@iszu.cn>",function(){},"关于深大课表","知道了")}}}},45:function(t,e,n){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(13),a=s(i),o=n(24),u=s(o);e["default"]={data:function(){return{stuInfo:{stu_no:"",stu_name:""}}},mounted:function(){if(this.$store.state.isLogin||this.$store.state.isPreLogin)return void this.$router.push({name:"index"})},methods:{getSchedule:function(){var t=this;return this.stuInfo.stu_no?this.stuInfo.stu_no?isNaN(parseInt(this.stuInfo.stu_no))||10!==this.stuInfo.stu_no.length?void navigator.notification.alert("请输入正确的学号！",function(){}):void this.$http.post(u["default"].api+"/scheduleprelogin",{stu_no:this.stuInfo.stu_no,stu_name:this.stuInfo.stu_name}).then(function(e){return 200===e.data.status?(window.localStorage.setItem("schedule",(0,a["default"])(e.data.data.schedule)),window.localStorage.setItem("preLoginState",(0,a["default"])({stu_no:t.stuInfo.stu_no,stu_name:t.stuInfo.stu_name})),window.localStorage.setItem("isPreLogin",!0),t.$store.dispatch("updatePreLoginState",{isPreLogin:!0,preLoginState:{stu_no:t.stuInfo.stu_no,stu_name:t.stuInfo.stu_name},schedule:e.data.data.schedule}),void t.$router.push({name:"index"})):void(201===e.data.status?navigator.notification.alert("学号和姓名不匹配！",function(){}):navigator.notification.alert("未知错误",function(){}))},function(t){navigator.notification.alert("网络无连接或服务器错误，请稍后重试。",function(){})}):void navigator.notification.alert("请输入姓名！",function(){}):void navigator.notification.alert("请输入学号！",function(){})}}}},84:function(t,e){},85:function(t,e){},86:function(t,e){},87:function(t,e){},91:function(t,e,n){t.exports=n.p+"static/img/icon.f79c2be.png"},92:function(t,e,n){var s,i;n(84),s=n(43);var a=n(95);i=s=s||{},"object"!=typeof s["default"]&&"function"!=typeof s["default"]||(i=s=s["default"]),"function"==typeof i&&(i=i.options),i.render=a.render,i.staticRenderFns=a.staticRenderFns,t.exports=s},93:function(t,e,n){var s,i;n(87),n(86),s=n(44);var a=n(97);i=s=s||{},"object"!=typeof s["default"]&&"function"!=typeof s["default"]||(i=s=s["default"]),"function"==typeof i&&(i=i.options),i.render=a.render,i.staticRenderFns=a.staticRenderFns,i._scopeId="data-v-3",t.exports=s},94:function(t,e,n){var s,i;n(85),s=n(45);var a=n(96);i=s=s||{},"object"!=typeof s["default"]&&"function"!=typeof s["default"]||(i=s=s["default"]),"function"==typeof i&&(i=i.options),i.render=a.render,i.staticRenderFns=a.staticRenderFns,i._scopeId="data-v-2",t.exports=s},95:function(module,exports){module.exports={render:function(){with(this)return _h("div",{attrs:{id:"app"}},[_h("router-view")])},staticRenderFns:[]}},96:function(module,exports,__webpack_require__){module.exports={render:function(){with(this)return _h("div",{attrs:{id:"loginPage"}},[_m(0)," ",_m(1)," ",_m(2)," ",_h("div",{staticClass:"form"},[_h("input",{directives:[{name:"model",value:stuInfo.stu_no,expression:"stuInfo.stu_no"}],attrs:{type:"text",placeholder:"10位学号"},domProps:{value:_s(stuInfo.stu_no)},on:{input:function(t){t.target.composing||(stuInfo.stu_no=t.target.value)}}})," ",_h("input",{directives:[{name:"model",value:stuInfo.stu_name,expression:"stuInfo.stu_name"}],attrs:{type:"text",placeholder:"姓名"},domProps:{value:_s(stuInfo.stu_name)},on:{input:function(t){t.target.composing||(stuInfo.stu_name=t.target.value)}}})," ",_h("button",{on:{click:getSchedule}},["立 即 使 用"])])," ",_h("div",{staticClass:"advanced"},[_m(3)," ",_h("div",{staticClass:"wxLogin"},[_h("svg",{attrs:{fill:"#FFFFFF",width:"30",height:"20",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[_h("g",{attrs:{transform:"scale(0.02, 0.02)"}},[_h("path",{attrs:{d:"M693.12 347.264c11.776 0 23.36 0.896 35.008 2.176-31.36-146.048-187.456-254.528-365.696-254.528C163.2 94.912 0 230.656 0 403.136c0 99.52 54.272 181.248 145.024 244.736L108.8 756.864l126.72-63.488c45.312 8.896 81.664 18.112 126.912 18.112 11.392 0 22.656-0.512 33.792-1.344-7.04-24.256-11.2-49.6-11.2-76.032C385.088 475.776 521.024 347.264 693.12 347.264zM498.304 249.024c27.392 0 45.376 17.984 45.376 45.248 0 27.136-17.984 45.312-45.376 45.312-27.072 0-54.336-18.176-54.336-45.312C443.968 266.944 471.168 249.024 498.304 249.024zM244.672 339.584c-27.2 0-54.592-18.176-54.592-45.312 0-27.264 27.392-45.248 54.592-45.248S289.92 266.944 289.92 294.272C289.92 321.408 271.872 339.584 244.672 339.584zM1024 629.76c0-144.896-145.024-262.976-307.904-262.976-172.48 0-308.224 118.144-308.224 262.976 0 145.28 135.808 262.976 308.224 262.976 36.096 0 72.512-9.024 108.736-18.112l99.392 54.528-27.264-90.624C969.728 783.872 1024 711.488 1024 629.76zM616.128 584.384c-17.984 0-36.224-17.92-36.224-36.224 0-18.048 18.24-36.224 36.224-36.224 27.52 0 45.376 18.176 45.376 36.224C661.504 566.464 643.648 584.384 616.128 584.384zM815.488 584.384c-17.856 0-36.032-17.92-36.032-36.224 0-18.048 18.112-36.224 36.032-36.224 27.264 0 45.376 18.176 45.376 36.224C860.864 566.464 842.752 584.384 815.488 584.384z"}})])]),"\n            微信登录\n        "])])])},staticRenderFns:[function(){with(this)return _h("div",{staticClass:"icon"},[_h("img",{attrs:{src:__webpack_require__(91),height:"80"}})])},function(){with(this)return _h("h3",["快速开始"])},function(){with(this)return _h("p",{staticClass:"tips"},["只需填写学号姓名，数据仅在本地储存"])},function(){with(this)return _h("p",["若要云端保存课表编辑信息，请登录"])}]}},97:function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"hello"},[_h("header",[_m(0)," "," ",_h("svg",{attrs:{fill:"#FFFFFF",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},on:{click:showMenu}},[_h("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})," ",_h("path",{attrs:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}})])," ",_h("div",{staticClass:"menu","class":{menuOpen:menuOpen}},[_h("ul",[_h("li",{on:{click:showAbout}},[_h("svg",{attrs:{fill:"#444",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"}},[_h("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})," ",_h("path",{attrs:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}})])," ",_m(1)])])])])," ",menuOpen?_h("div",{staticClass:"maskTransparent",on:{click:showMenu}}):_e()," ",_m(2)])},staticRenderFns:[function(){with(this)return _h("p",{attrs:{onclick:"toggleDrawer()"}},["深大课表"])},function(){with(this)return _h("p",["关于"])},function(){with(this)return _h("div",{staticClass:"schedule"},[_h("div",{staticClass:"col col1"},[_h("div",{staticClass:"class head title"},[_h("p")])," ",_h("div",{staticClass:"class title"},[_h("p",["1"])])," ",_h("div",{staticClass:"class title"},[_h("p",["2"])])," ",_h("div",{staticClass:"class title"},[_h("p",["3"])])," ",_h("div",{staticClass:"class title"},[_h("p",["4"])])," ",_h("div",{staticClass:"class title"},[_h("p",["5"])])," ",_h("div",{staticClass:"class title"},[_h("p",["6"])])," ",_h("div",{staticClass:"class title"},[_h("p",["7"])])," ",_h("div",{staticClass:"class title"},[_h("p",["8"])])," ",_h("div",{staticClass:"class title"},[_h("p",["9"])])," ",_h("div",{staticClass:"class title"},[_h("p",["10"])])," ",_h("div",{staticClass:"class title"},[_h("p",["11"])])," ",_h("div",{staticClass:"class title"},[_h("p",["12"])])])," ",_h("div",{staticClass:"col day1",attrs:{id:"day1"}},[_h("div",{staticClass:"class head"},[_h("p",["一"])])])," ",_h("div",{staticClass:"col day2",attrs:{id:"day2"}},[_h("div",{staticClass:"class head"},[_h("p",["二"])])])," ",_h("div",{staticClass:"col day3",attrs:{id:"day3"}},[_h("div",{staticClass:"class head"},[_h("p",["三"])])])," ",_h("div",{staticClass:"col day4",attrs:{id:"day4"}},[_h("div",{staticClass:"class head"},[_h("p",["四"])])])," ",_h("div",{staticClass:"col day5",attrs:{id:"day5"}},[_h("div",{staticClass:"class head"},[_h("p",["五"])])])," "])}]}}});
//# sourceMappingURL=app.30f0252e12e7e00df7a7.js.map